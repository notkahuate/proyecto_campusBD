# Proyecto de Base de Datos - Gesti칩n de Trainers

## 游늶 Categor칤as de Consultas

| Categor칤a | Enlace |
|-----------|--------|
| 游늷 Consultas de Campers | [游댌 Ver](Consultas.MD) |
| 游늷 Consultas de Evaluaciones | [游댌 Ver](consultas2.MD) |
| 游늷 Consultas de Rutas | [游댌 Ver](consultas3.MD) |
| 游늷 Consultas de Trainers | [游댌 Ver](consultas4.MD) |
| 游늷 SubConsultas | [游댌 Ver](subconsultas.md) |
| 游늷 Procedimientos | [游댌 Ver](Procedimientos.MD) |
| 游늷 JOINs B치sicos | [游댌 Ver](Joins.MD) |
| 游늷 JOINs con condiciones espec칤ficas | [游댌 Ver](Joins2.MD) |
| 游늷 JOINs con funciones de agregaci칩n | [游댌 Ver](Joins3.MD) |
| 游늷 TRIGGERS | [游댌 Ver](bd/triggers.sql) |

Este proyecto tiene como objetivo gestionar la informaci칩n sobre los entrenadores, su asignaci칩n a rutas, m칩dulos, 치reas de trabajo y disponibilidad. A continuaci칩n, se presentan las consultas SQL para obtener informaci칩n detallada sobre los entrenadores.

## Consultas SQL

1. **Listar todos los entrenadores registrados.**
    ```sql
    SELECT 
    t.id_trainner,
    t.nombre,
    t.apellido,
    t.especialidad,
    dt.id_datos_trainner,
    tc.numero as telefono
    FROM Trainner t
    LEFT JOIN DATOS_TRAINNER dt ON t.id_trainner = dt.id_trainner
    LEFT JOIN Telefono_Trainner tc ON dt.id_telefono = tc.id_telefono
    ORDER BY t.apellido, t.nombre;
    ```

2. **Mostrar los trainers con sus horarios asignados.**
    ```sql
    SELECT 
    t.nombre,
    t.apellido,
    ae.nombre_area,
    hc.dia_semana,
    hc.hora_inicio,
    hc.hora_fin
    FROM Trainner t
    INNER JOIN Asignacion_Entrenador_Grupo aeg ON t.id_trainner = aeg.id_entrenador
    INNER JOIN Area_Entrenamiento ae ON aeg.id_area = ae.id_area
    INNER JOIN Horario_Clase hc ON aeg.id_asignacion = hc.id_horario
    ORDER BY t.nombre, hc.dia_semana, hc.hora_inicio;
    ```

3. **Consultar los trainers asignados a m치s de una ruta.**
    ```sql
    SELECT 
    t.nombre,
    t.apellido,
    COUNT(DISTINCT at.id_ruta) as total_rutas,
    GROUP_CONCAT(DISTINCT re.nombre_ruta) as rutas_asignadas
    FROM Trainner t
    INNER JOIN Asignacion_Trainner at ON t.id_trainner = at.id_trainner
    INNER JOIN Ruta_Entrenamiento re ON at.id_ruta = re.id_ruta
    GROUP BY t.id_trainner, t.nombre, t.apellido
    HAVING COUNT(DISTINCT at.id_ruta) > 1
    ORDER BY total_rutas DESC;
    ```

4. **Obtener el n칰mero de campers por trainer.**
    ```sql
    SELECT 
    t.nombre,
    t.apellido,
    COUNT(DISTINCT gca.id_camper) as total_campers,
    GROUP_CONCAT(DISTINCT gc.nombre_grupo) as grupos
    FROM Trainner t
    LEFT JOIN Asignacion_Entrenador_Grupo aeg ON t.id_trainner = aeg.id_entrenador
    LEFT JOIN Grupo_Campers gc ON aeg.id_grupo = gc.id_grupo
    LEFT JOIN Grupo_Camper_Asignacion gca ON gc.id_grupo = gca.id_grupo
    GROUP BY t.id_trainner, t.nombre, t.apellido
    ORDER BY total_campers DESC;
    ```

5. **Mostrar las 치reas en las que trabaja cada trainer.**
    ```sql
    SELECT 
    t.nombre,
    t.apellido,
    COUNT(DISTINCT aeg.id_area) as total_areas,
    GROUP_CONCAT(DISTINCT ae.nombre_area) as areas_asignadas
    FROM Trainner t
    LEFT JOIN Asignacion_Entrenador_Grupo aeg ON t.id_trainner = aeg.id_entrenador
    LEFT JOIN Area_Entrenamiento ae ON aeg.id_area = ae.id_area
    GROUP BY t.id_trainner, t.nombre, t.apellido
    ORDER BY total_areas DESC;
    ```

6. **Listar los trainers sin asignaci칩n de 치rea o ruta.**
    ```sql
    SELECT 
    t.nombre,
    t.apellido,
    t.especialidad
    FROM Trainner t
    LEFT JOIN Asignacion_Trainner at ON t.id_trainner = at.id_trainner
    LEFT JOIN Asignacion_Entrenador_Grupo aeg ON t.id_trainner = aeg.id_entrenador
    WHERE at.id_asignacion IS NULL AND aeg.id_asignacion IS NULL;
    ```

7. **Mostrar cu치ntos m칩dulos est치n a cargo de cada trainer.**
    ```sql
    SELECT 
    t.nombre,
    t.apellido,
    COUNT(DISTINCT ma.id_modulo) as total_modulos,
    GROUP_CONCAT(DISTINCT ma.nombre_modulo) as modulos_asignados
    FROM Trainner t
    INNER JOIN Asignacion_Trainner at ON t.id_trainner = at.id_trainner
    INNER JOIN Ruta_Entrenamiento re ON at.id_ruta = re.id_ruta
    INNER JOIN Skill s ON re.id_ruta = s.id_ruta
    INNER JOIN Modulo_Aprendizaje ma ON s.id_skill = ma.id_skill
    GROUP BY t.id_trainner, t.nombre, t.apellido
    ORDER BY total_modulos DESC;
    ```

8. **Obtener el trainer con mejor rendimiento promedio de campers.**
    ```sql
    SELECT 
    t.nombre,
    t.apellido,
    ROUND(AVG(e.calificacion_final), 2) as promedio_campers,
    COUNT(DISTINCT c.id_camper) as total_campers
    FROM Trainner t
    INNER JOIN Asignacion_Entrenador_Grupo aeg ON t.id_trainner = aeg.id_entrenador
    INNER JOIN Grupo_Campers gc ON aeg.id_grupo = gc.id_grupo
    INNER JOIN Grupo_Camper_Asignacion gca ON gc.id_grupo = gca.id_grupo
    INNER JOIN Camper c ON gca.id_camper = c.id_camper
    INNER JOIN DATOS_CAMPER dc ON c.id_camper = dc.id_camper
    INNER JOIN Inscripcion i ON dc.id_datoscamper = i.id_datoscamper
    INNER JOIN Evaluacion e ON i.id_inscripcion = e.id_inscripcion
    GROUP BY t.id_trainner, t.nombre, t.apellido
    ORDER BY promedio_campers DESC
    LIMIT 1;
    ```

9. **Consultar los horarios ocupados por cada trainer.**
    ```sql
    SELECT 
    t.nombre,
    t.apellido,
    hc.dia_semana,
    hc.hora_inicio,
    hc.hora_fin,
    ae.nombre_area,
    gc.nombre_grupo
    FROM Trainner t
    INNER JOIN Asignacion_Entrenador_Grupo aeg ON t.id_trainner = aeg.id_entrenador
    INNER JOIN Horario_Clase hc ON aeg.id_asignacion = hc.id_horario
    INNER JOIN Area_Entrenamiento ae ON aeg.id_area = ae.id_area
    INNER JOIN Grupo_Campers gc ON aeg.id_grupo = gc.id_grupo
    ORDER BY t.nombre, hc.dia_semana, hc.hora_inicio;
    ```

10. **Mostrar la disponibilidad semanal de cada trainer.**
    ```sql
    WITH HorarioCompleto AS (
    SELECT DISTINCT 
        dia_semana,
        hora_inicio,
        hora_fin
    FROM Horario_Clase
    )
    SELECT 
        t.nombre,
        t.apellido,
        hc.dia_semana,
        hc.hora_inicio,
        hc.hora_fin,
        CASE 
            WHEN aeg.id_asignacion IS NULL THEN 'Disponible'
            ELSE 'Ocupado'
        END as estado
    FROM Trainner t
    CROSS JOIN HorarioCompleto hc
    LEFT JOIN Asignacion_Entrenador_Grupo aeg ON t.id_trainner = aeg.id_entrenador
    ORDER BY t.nombre, hc.dia_semana, hc.hora_inicio;
    ```

## Instalaci칩n

1. Clona este repositorio en tu m치quina local.
2. Crea la base de datos correspondiente en tu sistema de gesti칩n de bases de datos.
3. Ejecuta las consultas SQL en tu entorno de base de datos.

## Notas

- Aseg칰rate de tener configurada correctamente la base de datos antes de ejecutar las consultas.
- Las consultas deben adaptarse al modelo de datos espec칤fico que est칠s utilizando.

